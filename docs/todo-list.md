# TODOリスト - 性格診断アプリ

このドキュメントは、性格診断アプリの実装タスクを管理するためのものです。
チェックボックス (`[x]`) で進捗を管理します。

## 0. 開発基盤の準備

-   [x] **データ定義**: `docs/database-schema.md` に基づき、TypeScriptの型定義 (`PersonalityType`, `Question`, `Choice`) を作成する。
-   [x] **モックデータ作成**: 診断に必要な質問、選択肢、性格タイプのデータをまとめたモックデータファイルを作成する。
-   [x] **状態管理設計**: アプリケーションの状態（現在の画面、回答履歴など）をどのように管理するか方針を決定する。（例: `React.useState`, `React.useReducer`）
-   [x] **テスト: データ定義**: 作成したモックデータがTypeScriptの型定義に準拠していることを確認する簡単なテストを作成する。

## 1. スタート画面 (`StartScreen`)

-   [x] **実装: コンポーネント作成**: `StartScreen.tsx` ファイルを作成する。
-   [x] **実装: UI構築**: 機能一覧に基づき、タイトル、概要説明、診断開始ボタンをMUIコンポーネントで配置する。
-   [x] **実装: 画面遷移**: 「診断開始」ボタンをクリックすると、診断画面に切り替わるロジックを実装する。
-   [x] **テスト: 画面表示**: スタート画面の各要素が正しくレンダリングされることを確認するコンポーネントテストを作成する。
-   [x] **テスト: ボタンクリック**: 「診断開始」ボタンのクリックイベントが正しく発火することを確認するテストを作成する。

## 2. 診断画面 (`DiagnosisScreen`)

-   [x] **実装: コンポーネント作成**: `DiagnosisScreen.tsx` ファイルを作成する。
-   [x] **実装: 状態管理**: 現在の質問番号と、ユーザーが選択した回答の履歴を保持する状態を管理するロジックを実装する。
-   [x] **実装: UI構築**:
    -   [x] 現在の質問文を表示する。
    -   [x] 該当する回答選択肢をボタンとして表示する。
    -   [x] 診断の進捗を示すプログレスバーを表示する。
-   [x] **実装: 回答ロジック**:
    -   [x] 回答ボタンをクリックすると、その回答（どの性格タイプに紐づくか）を記録する。
    -   [x] 次の質問へ自動的に遷移する。
-   [x] **実装: 画面遷移**: 最後の質問に回答したら、結果表示画面に切り替わるロジックを実装する。
-   [x] **テスト: 画面表示**: 質問文、選択肢、プログレスバーが正しく表示されることを確認するテストを作成する。
-   [x] **テスト: 回答ロジック**: 回答を選択すると、正しくデータが記録され、次の質問に遷移することを確認するテストを作成する。

## 3. 結果表示画面 (`ResultScreen`)

-   [x] **実装: コンポーネント作成**: `ResultScreen.tsx` ファイルを作成する。
-   [x] **実装: 診断ロジック**: 診断画面から渡された回答履歴を基に、最も多く選択された性格タイプを判定するロジックを実装する。
-   [x] **実装: UI構築**:
    -   [x] 判定された性格タイプの名称と詳細説明文を表示する。
    -   [x] 「もう一度診断する」ボタンを表示する。
-   [x] **実装: やり直し機能**: 「もう一度診断する」ボタンをクリックすると、すべての状態がリセットされ、スタート画面に遷移するロジックを実装する。
-   [x] **テスト: 診断ロジック**: 特定の回答履歴パターンを与えた場合に、意図した通りの性格タイプが算出されることを確認するユニットテストを作成する。
-   [x] **テスト: 画面表示**: 診断結果と「もう一度診断する」ボタンが正しく表示されることを確認するテストを作成する。
-   [x] **テスト: やり直し機能**: 「もう一度診断する」ボタンをクリックすると、スタート画面に戻ることを確認するテストを作成する。

## 4. 全体

-   [x] **実装: 画面管理**: スタート、診断、結果の3つの画面コンポーネントを切り替える親コンポーネント（例: `App.tsx`）を実装する。
-   [x] **テスト: E2E (End-to-End)**: ユーザーが「診断開始」から回答を進め、結果が表示され、「もう一度診断する」で最初に戻るまでの一連の流れをシミュレートする統合テストを作成する。
-   [x] **リファクタリング**: 全体のコードを見直し、コメントの追加、DRY原則の適用など、品質を向上させる。