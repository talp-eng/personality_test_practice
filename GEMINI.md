# 技術選定メモ

このドキュメントは、本アプリケーション開発における技術選定の経緯と結果をまとめたものです。

## 1. プロジェクト要件

- サーバーとの通信は行わない、ブラウザ上で完結するWebアプリケーション。
- スマートフォンでの表示に対応したレスポンシブデザイン。
- 比較的容易に開発が進められること。

## 2. フレームワーク選定

### 候補

- React.js
- Vue.js
- Svelte

### 決定

**`React.js`** を採用。

#### 選定理由

- 世界で最も人気が高く、巨大なコミュニティとエコシステム（ライブラリ、ツール、情報源）を持つ。
- 問題が発生した際の解決策を見つけやすい。
- `create-react-app`や`Vite`などのツールにより、SPA（シングルページアプリケーション）の構築が容易。

## 3. UIライブラリ選定

### 候補

- MUI (Material-UI)
- Chakra UI
- Tailwind CSS

### 決定

**`MUI`** を採用。

#### 選定理由

- Googleのマテリアルデザインに基づいた、豊富で高品質なコンポーネントが提供されている。
- テーマ機能によるカスタマイズが容易で、アプリケーション全体でデザインの一貫性を保ちやすい。
- 信頼性が高く、ドキュメントも充実しているため、モダンなUIを迅速に実装できる。

## 4. 開発言語とツール

- **言語**: `TypeScript`
  - 静的型付けにより、コードの堅牢性と開発効率を向上させるため。
- **静적解析**: `ESLint`
  - コードの品質を維持し、潜在的なバグを未然に防ぐため。

## 5. 今後の拡張で検討するライブラリ

アプリケーションの規模や機能が拡大するに応じて、以下のライブラリの導入を検討します。

- **ルーティング**: `React Router` (複数ページ構成にする場合)
- **フォーム管理**: `React Hook Form` (複雑なフォームを実装する場合)
- **状態管理**: `Zustand` (コンポーネント間で状態を共有する必要が出てきた場合)
- **日付操作**: `date-fns` (日付や時刻の高度な操作が必要な場合)

---

## 6. 開発プロセス

今後の開発は、以下のプロセスと原則に則って進めます。

### 開発原則

- **シーケンス図の遵守**: 実装は、`docs/sequence-diagrams.md`で定義された処理フローに従います。
- **基本原則の適用**: DRY (Don't Repeat Yourself), KISS (Keep It Simple, Stupid), YAGNI (You Ain't Gonna Need It) などのソフトウェア開発原則を遵守し、クリーンでメンテナンス性の高いコードを維持します。
- **可読性の重視**: 非エンジニアによるレビューを想定し、日本語で詳細なコメントをコード内に記述します。

### 機能完了ごとのワークフロー

一つの機能（またはTODOリストの主要な項目）が完了するごとに、以下の手順を実施します。

1.  **自動テストの実行**: 作成したテストがすべてパスすることを確認します。
2.  **セルフレビューとリファクタリング**: 開発原則が守られているか、より良いコードにできないかを確認し、必要に応じてリファクタリングを行います。
3.  **潜在的な問題の確認**: パフォーマンス上の懸念など、将来問題となりうる点がないかレビューします。
4.  **動作確認**: ユーザー（開発者自身またはレビュアー）が実際に画面を操作し、意図した通りに機能が動作することを確認します。
5.  **ドキュメントの更新**: TODOリストの進捗を更新します。仕様変更があった場合は、関連するすべての設計資料（機能一覧、データ定義書、シーケンス図など）とこの`GEMINI.md`を最新の状態に更新します。

---

## 7. プロジェクト概要

### アプリケーション名（仮）

性格診断アプリ

### 目的

ユーザーがいくつかの設問に答えることで、予め用意された5種類の性格タイプに分類される診断コンテンツを提供する。すべての処理はブラウザ上で完結する。

## 8. ドキュメント

- **[機能一覧](./docs/feature-list.md)**: アプリケーションの機能要件をまとめたドキュメント。
- **[データ定義書](./docs/database-schema.md)**: アプリケーションで使用するデータの構造を定義したドキュメント。
- **[シーケンス図](./docs/sequence-diagrams.md)**: 主な機能の処理の流れを時系列で示したドキュメント。
- **[TODOリスト](./docs/todo-list.md)**: 実装タスクと進捗を管理するドキュメント。

---

## 9. 開発ログ

### 2023-10-27
- **完了タスク**: `TODOリスト: 0. 開発基盤の準備`
- **内容**:
  - TypeScriptの型定義ファイル (`app-types.ts`) を作成。
  - 診断ロジックの基盤となるモックデータ (`app-data.ts`) を作成。
  - アプリケーションの画面状態を管理する基本構造を `index.tsx` に実装。
- **備考**: これにより、各画面コンポーネントの実装に進む準備が整った。

### 2023-10-28
- **完了タスク**: `TODOリスト: 1. スタート画面 (StartScreen) の実装`
- **内容**:
  - スタート画面のUIコンポーネント (`StartScreen.tsx`) を新規作成。
  - `index.tsx` から `StartScreen` を呼び出し、診断開始のロジックを接続。
- **備考**: テストはテスト環境構築後に実施予定。

### 2023-10-29
- **完了タスク**: `TODOリスト: 0, 1` のテストを実装
- **内容**:
  - データ定義の整合性テスト (`app-data.test.ts`) を作成。
  - スタート画面コンポーネントの表示と動作を検証するテスト (`StartScreen.test.tsx`) を作成。
- **備考**: 本格的なテストフレームワークは未導入のため、テストの構造とロジックをファイルとして実装。これにより、初期開発フェーズの品質担保を強化。

### 2023-10-30
- **完了タスク**: `TODOリスト: 2. 診断画面 (DiagnosisScreen)` の実装とテスト
- **内容**:
  - 診断画面のUIコンポーネント (`DiagnosisScreen.tsx`) を新規作成。
  - `index.tsx` を更新し、診断画面の表示と完了ロジックを接続。
  - 診断画面コンポーネントの表示と動作を検証するテスト (`DiagnosisScreen.test.tsx`) を作成。
- **備考**: これで診断フローの中核部分が完成。

### 2023-10-31
- **完了タスク**: `TODOリスト: 3. 結果表示画面 (ResultScreen)` の実装とテスト
- **内容**:
  - 結果表示画面のUIコンポーネント (`ResultScreen.tsx`) を新規作成。ロジック（回答集計）も含む。
  - `index.tsx` を更新し、結果表示画面の表示とやり直しロジックを接続。
  - 結果表示コンポーネントの診断ロジック、表示、動作を検証するテスト (`ResultScreen.test.tsx`) を作成。
- **備考**: これで診断から結果表示、リスタートまでの一連のフローが完成。

### 2023-11-01
- **完了タスク**: `TODOリスト: 4. 全体` のリファクタリングとE2Eテスト
- **内容**:
  - 診断ロジックを `ResultScreen.tsx` から `utils.ts` に分離し、リファクタリングを実施。
  - 分離した診断ロジックのテスト (`utils.test.ts`) を作成。
  - 全テストファイルから重複したテスト補助関数の定義を削除。
  - アプリ全体のフローを検証するE2Eテストの概念ファイル (`App.e2e.test.ts`) を作成。
- **備考**: これでTODOリストの全タスクが完了。コード品質が向上し、全体の動作保証が強化された。